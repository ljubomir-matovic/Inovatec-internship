<h2 class="text-center pt-3">{{ 'Routes.OrdersHeader' | translate }}</h2>
<div class="row my-4">
    <div class="col d-flex justify-content-center">
    <div class="table-container">
        <p-table
            #itemsTable
            class="card"
            dataKey="id"
            [paginator]="totalRecords > pageSize"
            [rows]="pageSize"
            [totalRecords]="totalRecords"
            [(first)]="first"
            [value]="orders"
            (onLazyLoad)="loadOrders($event)"
            [lazy]="true"
            [loading]="loading"
            [globalFilterFields]="['name']"
            styleClass="p-datatable-sm"
            [showLoader]="false"
            >
            <ng-template pTemplate="emptymessage">
              <tr>
                <td colspan="5">
                  <div class="d-flex justify-content-center">
                    <p class="text-center mb-0">{{ 'Common.TableEmpty' | translate }}</p>
                  </div>
                </td>
              </tr>
            </ng-template>
    <ng-template pTemplate="caption">
        <div class="d-flex align-items-center justify-content-between">
            <div>
                <button pButton [label]="'Common.ClearLabel' | translate" class="p-button-outlined" icon="pi pi-filter-slash" title="Clear all filters" (click)="clearFilters(itemsTable)"></button>
            </div>
        </div>
    </ng-template>
    <ng-template pTemplate="header">
        <tr>
            <th>#</th>
            <th>{{'OrderAdministration.StateLabel' | translate}}</th>
            <th pSortableColumn="dateCreated">{{'OrderAdministration.DateCreatedLabel' | translate}}<p-sortIcon field="dateCreated" ></p-sortIcon></th>
        </tr>
        <tr>
          <th></th>
            <th>
              <p-multiSelect [(ngModel)]="selectedStates" appendTo="body" [options]="orderStates" optionLabel="name" (onChange)="filterByState(itemsTable)" [style]="{ width: '100%'}">
                <ng-template let-option pTemplate="state">
                    <div class="inline-block vertical-align-middle">
                        <span class="vertical-align-middle">{{'OrderAdministration.' + option.name | translate}}</span>
                    </div>
                </ng-template>
                <ng-template pTemplate="selectedItems" let-option>
                  <div *ngIf="option == undefined || option.length == 0">&nbsp;&nbsp;</div>
                  <div *ngIf="option != undefined && option.length == 1">{{'OrderAdministration.' + option[0].name | translate}}</div>
                  <div *ngIf="option != undefined && option.length > 1">{{ option.length + " " + ('OrderAdministration.SelectStateLabel' | translate) }}</div>
                </ng-template>
                <ng-template let-option pTemplate="item">
                  <div class="inline-block vertical-align-middle">
                      <span class="vertical-align-middle">{{'OrderAdministration.' + option.name | translate}}</span>
                  </div>
              </ng-template>
            </p-multiSelect>
            </th>
            <th> </th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-order let-i="rowIndex">
        <tr (click)="openPage(order.id)" class="table-row">
            <td>{{order.id}}</td>
            <td class="text-center"> <p-chip [ngClass]="{ 'pending-chip' : order.state == 0, 'in-progress-chip' : order.state == 1, 'done-chip' : order.state == 2, 'canceled-chip': order.state == 3}" label="{{ 'OrderAdministration.' + orderStates[order.state].name | translate }}"></p-chip></td>
            <td>{{ order.dateCreated | date:'dd.MM.yyyy HH:mm' }}</td>
        </tr>
    </ng-template>
    <ng-template pTemplate="loadingbody">
      <tr>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
      </tr>
      <tr>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
      </tr>
      <tr>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
      </tr>
      <tr>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
      </tr>
      <tr>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
      </tr>
      <tr>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
      </tr>
      <tr>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
      </tr>
      <tr>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
      </tr>
      <tr>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
      </tr>
      <tr>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
      </tr>
      <tr>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
      </tr>
      <tr>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
      </tr>
      <tr>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
        <td><p-skeleton height="30px"></p-skeleton></td>
      </tr>
    </ng-template>
</p-table>
</div>
</div>
</div>
